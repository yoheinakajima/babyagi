# 注意事項

- 意図せず環境を破壊する恐れがあります。基本的にはDockerなどの仮想環境で実行してください。
- 目的を達成できず、ループし続けることがあります。その際にAPIの使用量が多くなることがありますので、責任を持って使用してください
- 基本的にはGPT-4以上で検証しているため、GPT-4以上の使用を推奨します

# 目的

このPythonスクリプトは、AIが計画しつつコマンドを実行するシステムの一例です。このシステムは、OpenAIのGPT-4以上を使用して、計画してタスクの作成およびコマンドの実行を行います。このシステムの主なアイデアは、[BabyAGI](https://github.com/yoheinakajima/babyagi) のようにAIが計画する能力に、GUIよりも古くからあるコンピューターとの対話システムのCLIを組み合わせるとどのようになるか試すためのものです。LLMはもしかしたらCLIと相性が良いかもしれないと言うアイディアから来ています。[BabyAGI](https://github.com/yoheinakajima/babyagi)の思考部分だった箇所について効率良くコマンドが実行するためにかなり簡略化してしまっています。(後に変えていくかもしれません)

# 仕組み

このスクリプトは、次のような継続したループを実行することで動作します

1. タスクリストから最初のタスクを取り出す。
2. そのタスクがコマンドタスクか計画タスクかを判別する
3. コマンドタスクの場合:
    1. コマンドを実行
    2. コマンド実行結果がStatus Codeが0かつ応答が無い場合:
        次のタスクへ
    3. それ以外:
        コマンド実行の結果をLLMで分析し、目的が完了しているかチェックし、完了していない場合は新しいタスクリストを作成
4. 計画タスクの場合:
    1. LLMで計画を実行
    2. 実行した計画をLLMで分析し、新しいタスクリストを作成する

![Architecture](docs/Architecture.png)

# セットアップ

以下の手順を実施してください。

1. ```git clone https://github.com/saten-private/BabyCommandAGI.git```
2. ```cd```でBabyCommandAGIのディレクトリに入ってくださ
3. ```cp .env.example .env``` で環境変数を入れるファイルを作ります
4. OPENAI_API_KEYにOpenAIキーを設定します。
5. RESULTS_STORE_NAME 変数にタスクの結果を保存するテーブルの名前を設定します。
6. （オプション）OBJECTIVE変数にタスク管理システムの目的を設定します。
7. （オプション）INITIAL_TASK 変数に、システムの最初のタスクを設定します。

# 実行(Docker)

前提条件として、docker と docker-compose がインストールされている必要があります。Docker desktop は最もシンプルなオプションです https://www.docker.com/products/docker-desktop/

以下を実行してください。

```
docker-compose up
```

**注意：目的を達成できず、ループし続けることがありま。OpenAI API の使用料にご注意ください。**

失敗した場合は、再度実行すれば途中から再開できます。初期状態から実行したい場合は、```.env```のRESULTS_STORE_NAMEを変更してください。

OBJECTIVEが異なった際も別にタスクを保存します。

```data```フォルダ配下に途中まで実行されたタスクは保存されています。

# コントリビュート

BabyCommandAGI はまだ初期段階にあり、その方向性とそこに到達するためのステップを決定しているところです。現在、BabyCommandAGI が目指しているのは、「シンプル」であることです。このシンプルさを維持するために、PR を提出する際には、以下のガイドラインを遵守していただくようお願いいたします:

- 大規模なリファクタリングではなく、小規模でモジュール化された修正に重点を置く。
- 新機能を導入する際には、対応する特定のユースケースについて詳細な説明を行うこと。

@saten-private (2023年5月21日)からのメモ:

私はオープンソースへの貢献に慣れていません。昼間は他の仕事をしており、PRやissueのチェックも頻繁にできるかはわかりません。但し、このアイディアを大事にしており、みんなの役に立つと良いと考えています。何かあれば気軽におっしゃってください。皆さんから多くのことを学びたいと思っています。
私は未熟者であり、英語も話せませんし、日本以外の文化をほぼ知らないです。但し、自分のアイディアを大事にしているし、多くの人の役に立つと良いとも考えています。
(きっとこれからもつまらないアイディアをいっぱい出すと思います)
